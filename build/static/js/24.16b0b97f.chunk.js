(this["webpackJsonpfe-admin-senior-ute"]=this["webpackJsonpfe-admin-senior-ute"]||[]).push([[24],{311:function(e,t,n){"use strict";n.d(t,"e",(function(){return u})),n.d(t,"c",(function(){return d})),n.d(t,"b",(function(){return l})),n.d(t,"d",(function(){return m})),n.d(t,"a",(function(){return b}));var a=n(121),r=n(92),s=n.n(r),c=n(418),o=n.n(c),i=n(61),u=o.a.create({baseURL:i.b.ApiUrl,timeout:3e4,headers:{"Content-Type":"application/json"}});u.interceptors.request.use((function(e){var t,n=i.b.getAPIRequestToken();return n?(e.headers.Authorization="".concat(null===n||void 0===n||null===(t=n.access)||void 0===t?void 0:t.token),e):e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e}),(function(e){var t=e.response.status,n=e.response.config;return 401===t&&Object(a.a)(s.a.mark((function e(){var t,a,r,c,o,d,l,m;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=i.b.getAPIRequestToken(),e.next=3,u.post("/api/v1/user/refresh",{refreshToken:null===a||void 0===a||null===(t=a.refresh)||void 0===t?void 0:t.token});case 3:if(null===(r=e.sent)||void 0===r||!r.data){e.next=13;break}if(null!==r&&void 0!==r&&null!==(c=r.data)&&void 0!==c&&c.token){e.next=8;break}return i.b.setApiRequestToken(""),e.abrupt("return");case 8:return i.b.setApiRequestToken(null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.token),n.headers={"Content-Type":"application/json",Authorization:"".concat(null===r||void 0===r||null===(d=r.data)||void 0===d||null===(l=d.token)||void 0===l||null===(m=l.access)||void 0===m?void 0:m.token)},n.baseURL=i.b.ApiUrl,n.timeout=3e4,e.abrupt("return",u(n));case 13:case"end":return e.stop()}}),e)})))(),e.response}));var d=function(e,t){return u.post(e,t)},l=function(e,t){return u.get("".concat(e),{params:t})},m=function(e,t){return u.put("".concat(e),t)},b=function(e,t){return u.delete("".concat(e),{params:t})}},478:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s})),n.d(t,"c",(function(){return c}));var a=n(311),r=function(e){return Object(a.b)("/api/v1/user")},s=function(e){return Object(a.c)("/api/v1/user/login",e)},c=function(e){return Object(a.c)("/api/v1/user/update-status",e)}},652:function(e,t,n){"use strict";n.r(t);var a=n(121),r=n(36),s=n(92),c=n.n(s),o=n(0),i=n(46),u=n(13),d=n(12),l=n(10),m=n(280),b=n(288),j=n(276),p=n(179),h=n(283),v=n(281),f=n(178),x=n(16),O=n(7),g=n(355),w=n(356),k=n(478),N=n(56),y=n(61),q=n(1),T=w.c().shape({username:w.d().required("Username is required").min(8,"Username muse be at least 6 characters"),password:w.d().required("Password is required")});t.default=function(){var e=Object(i.c)(),t=Object(u.g)(),n=Object(u.h)(),s=Object(o.useState)(""),w=Object(r.a)(s,2),A=w[0],S=w[1],U=function(){var r=Object(a.a)(c.a.mark((function a(r,s){var o,i,u,d,l,m,b;return c.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(k.b)({email:r.username,password:r.password});case 2:200===(o=a.sent).status?"admin"!==(null===(i=o.data)||void 0===i||null===(u=i.user)||void 0===u||null===(d=u.user)||void 0===d||null===(l=d.role)||void 0===l?void 0:l.name)?S("You has no permission to access to this page"):(y.b.setApiRequestToken(o.data.tokens),e(Object(N.b)(null===(m=o.data)||void 0===m?void 0:m.user)),void 0!==(null===n||void 0===n?void 0:n.state)?t.push("".concat(n.state.from).concat(n.state.search)):t.push("/")):(S(null===o||void 0===o||null===(b=o.data)||void 0===b?void 0:b.message),s());case 4:case"end":return a.stop()}}),a)})));return function(e,t){return r.apply(this,arguments)}}();return Object(q.jsx)("main",{children:Object(q.jsx)("section",{className:"d-flex align-items-center my-5 mt-lg-6 mb-lg-5",children:Object(q.jsxs)(m.a,{children:[Object(q.jsx)("p",{className:"text-center",children:Object(q.jsxs)(b.a.Link,{as:x.b,to:O.a.DashboardPage.path,className:"text-gray-700",children:[Object(q.jsx)(d.a,{icon:l.d,className:"me-2"})," Back to homepage"]})}),Object(q.jsx)(j.a,{className:"justify-content-center form-bg-image",style:{backgroundImage:"url(".concat("adadad",")")},children:Object(q.jsx)(p.a,{xs:12,className:"d-flex align-items-center justify-content-center",children:Object(q.jsxs)("div",{className:"bg-white shadow-soft border rounded border-light p-4 p-lg-5 w-100 fmxw-500",children:[Object(q.jsx)("div",{className:"text-center text-md-center mb-4 mt-md-0",children:Object(q.jsx)("h3",{className:"mb-0",children:"Sign in to our platform"})}),Object(q.jsx)(g.c,{initialValues:{username:"",password:""},validationSchema:T,onSubmit:function(e,t){t.setSubmitting;var n=t.resetForm;return U(e,n)},children:function(e){var t=e.values,n=e.touched,a=e.errors,r=e.isSubmitting,s=e.handleChange,c=e.handleBlur,o=e.handleSubmit;return Object(q.jsxs)(h.a,{className:"mt-4 basic-form",noValidate:!0,onSubmit:o,children:[Object(q.jsx)("div",{className:"d-flex justify-content-center",children:Object(q.jsx)("span",{style:{color:"red"},children:A})}),Object(q.jsxs)(h.a.Group,{id:"username",className:"",children:[Object(q.jsx)(h.a.Label,{children:"Your Username"}),Object(q.jsxs)(v.a,{className:a.username&&n.username&&"error",children:[Object(q.jsx)(v.a.Text,{children:Object(q.jsx)(d.a,{icon:l.v})}),Object(q.jsx)(h.a.Control,{autoFocus:!0,type:"text",placeholder:"Username",value:t.username,onChange:s,onBlur:c,className:a.username&&n.username&&"error",name:"username"})]}),Object(q.jsx)(g.a,{name:"username",component:"div",className:"invalid-feedback"})]}),Object(q.jsx)(h.a.Group,{children:Object(q.jsxs)(h.a.Group,{id:"password",className:"mb-4",children:[Object(q.jsx)(h.a.Label,{children:"Your Password"}),Object(q.jsxs)(v.a,{className:a.password&&n.password&&"error",children:[Object(q.jsx)(v.a.Text,{children:Object(q.jsx)(d.a,{icon:l.Q})}),Object(q.jsx)(h.a.Control,{name:"password",type:"password",placeholder:"Password",value:t.password,onChange:s,onBlur:c,className:a.password&&n.password&&"error",maxLength:16})]}),Object(q.jsx)(g.a,{name:"password",component:"div",className:"invalid-feedback"})]})}),Object(q.jsx)(f.a,{variant:"primary",type:"submit",className:"w-100",disabled:r,children:"Sign in"})]})}})]})})})]})})})}}}]);
//# sourceMappingURL=24.16b0b97f.chunk.js.map